# FIREBIRD SQL

> Firebird é um banco de dados baseado em arquivo.

## CRIAR UMA DATABASE COM ISQL

```sql
CREATE DATABASE 'bancodedados.fdb' USER 'sysdba' PASSWORD 'masterkey';
```

## CONECTANDO NO BANCO VIA CONSOLE

```bash
isql-fb bancodedados.fdb
```

## CRIAR TABELAS NO NOVO BANCO DE DADOS

[STACK OVERFLOW - FORMA MAIS SIMPLES DE COMO CRIAR UM ID AUTOMÁTICO NO FB](https://stackoverflow.com/questions/34553826/easiest-way-to-create-an-auto-increment-field-in-firebird-database)

```sql
CREATE TABLE nomedatabela (
	item_id integer generated by default as identity primary key,
	item_nome varchar(30) not null,
	item_decricao varchar(80)
);
```

> Após o nome do campo definimos o tipo de dados e depois o resto dos statements, como definir se pode ou não existir nulos.

> O id neste exemplo é gerado com uma nova técnica que foi adicionada ao firebird 3.0 como um syntatic sugar para a forma anterior de fazer o mesmo processo:

```sql
CREATE TABLE nomedatabela (
	item_id integer not null,
	item_id varchar(30) not null,
	item_descricao varchar(80)
);
```

> Na criação da tabela não há nada de especial com a coluna em si, mas é necessário criar um gatilho pré insert que vai gerar um novo valor a cada inserção de valores. Para garantir que teremos valores unicos e consistentes vamo usar um GENERATOR, vulgo SEQUENCE:

```sql
CREATE SEQUENCE itemid;
```

> Agora criamos o trigger (gatilho):

```sql
set term !! ;
CREATE TRIGGER nomedatabelaid FOR nomedatabela
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
	NEW.ID = next value for itemid;
END!!
set term ; !!
```

> CREATE TRIGGER é o statement responsável por criar um gatilho, em seguida botamos o seu nome que é basicamente a junção do nome da tabela e o que realmente é o nome do gatilho e com o FOR definimos para qual tabela aquele gatilho serve.

> ACTIVE BEFORE INSERT diz que vamos ativar este gatilho antes de um insert na tabela, assim teremos este código rodando sempre que adicionamos algo novo para criar o id único e incremental para está nova entidade.
